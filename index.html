<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AudioClean : R√©duction de Bruit & Conversion</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192x192.png" type="image/png">
    <meta name="theme-color" content="#2563eb">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { max-width: 800px; margin: 0 auto; padding: 20px; background: #f8fafc; color: #1e293b; }
        h1 { color: #2563eb; margin-bottom: 25px; text-align: center; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .file-input { margin: 20px 0; padding: 10px; width: 100%; border: 2px dashed #94a3b8; border-radius: 8px; cursor: pointer; }
        .btn { background: #2563eb; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px; transition: background 0.3s; }
        .btn:disabled { background: #94a3b8; cursor: not-allowed; }
        .btn:hover:not(:disabled) { background: #1d4ed8; }
        .status { margin: 20px 0; padding: 15px; border-radius: 8px; text-align: center; }
        .success { background: #dcfce7; color: #166534; }
        .error { background: #fee2e2; color: #991b1b; }
        .loading { background: #e0f2fe; color: #083344; }
        select { padding: 10px; border-radius: 8px; border: 1px solid #94a3b8; margin: 10px 0; width: 100%; }
        #downloadLink { display: none; margin: 20px 0; text-align: center; }
        #downloadLink a { color: #2563eb; text-decoration: none; font-weight: bold; padding: 10px 20px; border: 1px solid #2563eb; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéß AudioClean</h1>
        <p>Chargez un fichier AAC ou enregistrez via magn√©tophone, r√©duisez le bruit et convertissez !</p>
        
        <!-- Ajout de audio/webm pour les enregistrements magn√©tophone -->
        <input type="file" id="audioFile" class="file-input" accept="audio/aac,audio/mp4,audio/webm,audio/wav">
        
        <label for="outputFormat">Format de sortie :</label>
        <select id="outputFormat">
            <option value="mp3">MP3</option>
            <option value="mp4">MP4 (audio)</option>
            <option value="wav">WAV</option>
        </select>
        
        <button id="processBtn" class="btn">Traiter (r√©duction de bruit + conversion)</button>
        <div id="status" class="status"></div>
        
        <div id="downloadLink">
            <p>Fichier trait√© pr√™t !</p>
            <a id="downloadBtn" download>T√©l√©charger</a>
        </div>
    </div>

    <!-- Service Worker registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker enregistr√© :', reg.scope))
                    .catch(err => console.error('Erreur SW :', err));
            });
        }
    </script>
    <!-- Chargement des biblioth√®ques avant app.js -->
    <script src="https://cdn.jsdelivr.net/npm/ffmpeg.js@4.2.9003/ffmpeg.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
